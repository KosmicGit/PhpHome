drop database raspi;

CREATE DATABASE raspi;

USE raspi;

CREATE TABLE `raspi`.`usuarios` ( 
`id_usuario` INT NOT NULL AUTO_INCREMENT , 
`usuario` VARCHAR(20) NOT NULL , 
`pass` VARCHAR(200) NOT NULL , 
`alias` VARCHAR(20) NOT NULL , 
`email` VARCHAR(80) NULL , 
`otros` VARCHAR(100) NULL , 
PRIMARY KEY (`id_usuario`)) ENGINE = InnoDB;

CREATE TABLE `raspi`.`historial` ( 
`id_usuario` INT NOT NULL , 
`id_comando` INT NOT NULL , 
`comando` VARCHAR(20) NOT NULL , 
`fecha` DATETIME NOT NULL , 
`otros` VARCHAR(100) NULL) ENGINE = InnoDB;

ALTER TABLE `raspi`.`historial` ADD FOREIGN KEY (`id_usuario`) REFERENCES `usuarios`(`id_usuario`) ON UPDATE CASCADE ON DELETE RESTRICT;


INSERT INTO `usuarios` (`id_usuario`, `usuario`, `pass`, `alias`, `email`, `otros`) VALUES (NULL, 'Esteban', SHA2('yo',512), 'Esteban', 'asirestebanvi@gmail.com', 'usuario de prueba');

INSERT INTO `usuarios` (`id_usuario`, `usuario`, `pass`, `alias`, `email`, `otros`) VALUES (NULL, 'Jose', SHA2('yo',512), 'Jose', 'kayserhack@gmail.com', 'usuario de prueba');
